@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 400;
    src: url('/fonts/Inter_18pt-Regular.ttf') format('truetype');
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 500;
    src: url('/fonts/Inter_18pt-Medium.ttf') format('truetype');
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 600;
    src: url('/fonts/Inter_18pt-SemiBold.ttf') format('truetype');
}

@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 700;
    src: url('/fonts/Inter_18pt-Bold.ttf') format('truetype');
}

/* =================================================================
   Root & Default Theme
   ================================================================= */
:root, .theme-default {
    /* --- Palette --- */
    --blue-950: #0f172a;
    --blue-900: #1e293b;
    --blue-800: #334155;
    --blue-700: #475569;
    --blue-600: #64748b;
    --blue-300: #94a3b8;
    --blue-100: #e2e8f0;
    --sky-400: #38bdf8;
    --sky-500: #0ea5e9;
    --sky-600: #0284c7;
    --green-500: #22c55e;
    --green-600: #16a34a;
    --red-500: #ef4444;
    --red-800: #991b1b;
    --red-900: #b91c1c;
    --yellow-400: #facc15;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--blue-950);
    --bg-secondary: var(--blue-900);
    --bg-tertiary: var(--blue-800);
    --text-primary: var(--blue-100);
    --text-secondary: var(--blue-300);
    --border-color: var(--blue-700);
    --accent-color: var(--sky-400);
    --accent-color-hover: var(--sky-500);
    --success-color: var(--green-500);
    --danger-color: var(--red-500);
    --warning-color: var(--yellow-400);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--blue-700);
    --btn-default-hover-bg: var(--blue-600);
    --btn-default-text: var(--blue-100);
    --btn-danger-bg: var(--red-800);
    --btn-danger-hover-bg: var(--red-900);
    --btn-danger-text: var(--blue-100);
    --btn-accent-bg: var(--sky-500);
    --btn-accent-hover-bg: var(--sky-600);
    --btn-accent-text: var(--blue-100);
    --btn-success-bg: var(--green-500);
    --btn-success-hover-bg: var(--green-600);
    --btn-success-text: var(--blue-100);
    --toggle-bg-off: var(--blue-700);
    --toggle-bg-on: var(--sky-500);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Light Theme
   ================================================================= */
.theme-light {
    /* --- Palette --- */
    --slate-100: #f1f5f9;
    --white: #ffffff;
    --slate-200: #e2e8f0;
    --slate-800: #1e293b;
    --slate-500: #64748b;
    --slate-300: #cbd5e1;
    --slate-400: #94a3b8;
    --sky-400: #38bdf8;
    --sky-500: #0ea5e9;
    --green-600: #16a34a;
    --green-700: #15803d;
    --red-600: #dc2626;
    --red-500: #ef4444;
    --amber-500: #f59e0b;
    --black-transparent: rgba(0, 0, 0, 0.1);
    --white-transparent: rgba(255, 255, 255, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--slate-100);
    --bg-secondary: var(--white);
    --bg-tertiary: var(--slate-200);
    --text-primary: var(--slate-800);
    --text-secondary: var(--slate-500);
    --border-color: var(--slate-300);
    --accent-color: var(--sky-400);
    --accent-color-hover: var(--sky-500);
    --success-color: var(--green-600);
    --danger-color: var(--red-600);
    --warning-color: var(--amber-500);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--slate-400);
    --btn-default-hover-bg: var(--slate-300);
    --btn-default-text: var(--slate-800);
    --btn-danger-bg: var(--red-500);
    --btn-danger-hover-bg: var(--red-600);
    --btn-danger-text: var(--white);
    --btn-accent-bg: var(--sky-400);
    --btn-accent-hover-bg: var(--sky-500);
    --btn-accent-text: var(--white);
    --btn-success-bg: var(--green-600);
    --btn-success-hover-bg: var(--green-700);
    --btn-success-text: var(--white);
    --toggle-bg-off: var(--slate-400);
    --toggle-bg-on: var(--sky-400);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--white-transparent);
}

/* =================================================================
   Meteorite Theme
   ================================================================= */
.theme-meteorite {
    /* --- Core Palette --- */
    --core-purple: #4e21e7;
    --core-meteorite: #433f65;
    --core-green-free: #0da49a;
    --core-blue-pro: #334eff;
    --core-red-insights: #ee485f;
    --purple-light: #ede8fd;
    --purple-dark: #0c082f;
    --highlight-purple-alt: #c2befa;
    --highlight-red: #fa9de7;
    --gradient-purple-light: #2b1f99;
    --gradient-purple-dark: #0c082f;
    --bg-secondary-derived: #1a154a;
    --accent-hover-derived: #5c71ff;
    --default-hover-derived: #5b587d;
    --danger-hover-derived: #f46d7e;
    --success-hover-derived: #3db6af;
    --overlay-derived: rgba(12, 8, 47, 0.7);

    /* --- Mapping --- */
    --bg-primary: radial-gradient(farthest-side at top, var(--gradient-purple-light), var(--gradient-purple-dark));
    --bg-secondary: var(--bg-secondary-derived);
    --bg-tertiary: var(--gradient-purple-light);
    --text-primary: var(--purple-light);
    --text-secondary: var(--highlight-purple-alt);
    --border-color: var(--core-meteorite);
    --accent-color: var(--core-blue-pro);
    --accent-color-hover: var(--accent-hover-derived);
    --success-color: var(--core-green-free);
    --danger-color: var(--core-red-insights);
    --warning-color: var(--highlight-red);
    --btn-default-bg: var(--core-meteorite);
    --btn-default-hover-bg: var(--default-hover-derived);
    --btn-default-text: var(--purple-light);
    --btn-danger-bg: var(--core-red-insights);
    --btn-danger-hover-bg: var(--danger-hover-derived);
    --btn-danger-text: #ffffff;
    --btn-accent-bg: var(--core-blue-pro);
    --btn-accent-hover-bg: var(--accent-hover-derived);
    --btn-accent-text: #ffffff;
    --btn-success-bg: var(--core-green-free);
    --btn-success-hover-bg: var(--success-hover-derived);
    --btn-success-text: #ffffff;
    --toggle-bg-off: var(--core-meteorite);
    --toggle-bg-on: var(--core-blue-pro);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--overlay-derived);
}

/* =================================================================
   Steel Theme
   ================================================================= */
.theme-steel {
    /* --- Core Palette --- */
    --core-purple: #4e21e7;
    --core-meteorite: #433f65;
    --core-green-free: #0da49a;
    --core-blue-pro: #334eff;
    --core-red-insights: #ee485f;
    --blue-pro-light: #eaedff;
    --blue-pro-dark: #08103f;
    --highlight-blue-alt: #c2cfed;
    --highlight-red: #fa9de7;
    --gradient-blue-light: #3c6e99;
    --gradient-blue-dark: #08103f;
    --bg-secondary-derived: #1a2a6c;
    --bg-tertiary-derived: #283a80;
    --accent-hover-derived: #5c71ff;
    --default-hover-derived: #5b587d;
    --danger-hover-derived: #f46d7e;
    --success-hover-derived: #3db6af;
    --overlay-derived: rgba(8, 16, 63, 0.7);

    /* --- Mapping --- */
    --bg-primary: radial-gradient(farthest-side at top, var(--gradient-blue-light), var(--gradient-blue-dark));
    --bg-secondary: var(--bg-secondary-derived);
    --bg-tertiary: var(--bg-tertiary-derived);
    --text-primary: var(--blue-pro-light);
    --text-secondary: var(--highlight-blue-alt);
    --border-color: var(--core-meteorite);
    --accent-color: var(--core-blue-pro);
    --accent-color-hover: var(--accent-hover-derived);
    --success-color: var(--core-green-free);
    --danger-color: var(--core-red-insights);
    --warning-color: var(--highlight-red);
    --btn-default-bg: var(--core-meteorite);
    --btn-default-hover-bg: var(--default-hover-derived);
    --btn-default-text: var(--blue-pro-light);
    --btn-danger-bg: var(--core-red-insights);
    --btn-danger-hover-bg: var(--danger-hover-derived);
    --btn-danger-text: #ffffff;
    --btn-accent-bg: var(--core-blue-pro);
    --btn-accent-hover-bg: var(--accent-hover-derived);
    --btn-accent-text: #ffffff;
    --btn-success-bg: var(--core-green-free);
    --btn-success-hover-bg: var(--success-hover-derived);
    --btn-success-text: #ffffff;
    --toggle-bg-off: var(--core-meteorite);
    --toggle-bg-on: var(--core-blue-pro);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--overlay-derived);
}

/* =================================================================
   VIP Theme
   ================================================================= */
.theme-VIP {
    /* --- Palette --- */
    --gray-900: #121212;
    --gray-800: #1e1e1e;
    --gray-700: #2c2c2c;
    --gray-200: #e0e0e0;
    --gray-400: #b0b0b0;
    --gray-600: #444;
    --lime-300: #e2ff00;
    --lime-400: #cde200;
    --green-500: #4caf50;
    --green-600: #43a047;
    --red-500: #f44336;
    --orange-500: #ff9800;
    --gray-blue-400: #9598a1;
    --gray-blue-500: #82858d;
    --red-800: #b71c1c;
    --red-700: #d32f2f;
    --white: #ffffff;
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--gray-900);
    --bg-secondary: var(--gray-800);
    --bg-tertiary: var(--gray-700);
    --text-primary: var(--gray-200);
    --text-secondary: var(--gray-400);
    --border-color: var(--gray-600);
    --accent-color: var(--lime-300);
    --accent-color-hover: var(--lime-400);
    --success-color: var(--green-500);
    --danger-color: var(--red-500);
    --warning-color: var(--orange-500);
    --btn-default-bg: var(--gray-blue-400);
    --btn-default-hover-bg: var(--gray-blue-500);
    --btn-default-text: var(--gray-900);
    --btn-danger-bg: var(--red-800);
    --btn-danger-hover-bg: var(--red-700);
    --btn-danger-text: var(--gray-200);
    --btn-accent-bg: var(--lime-300);
    --btn-accent-hover-bg: var(--lime-400);
    --btn-accent-text: var(--gray-900);
    --btn-success-bg: var(--green-500);
    --btn-success-hover-bg: var(--green-600);
    --btn-success-text: var(--white);
    --toggle-bg-off: var(--gray-600);
    --toggle-bg-on: var(--lime-300);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Matrix Theme
   ================================================================= */
.theme-matrix {
    /* --- Palette --- */
    --black: #000000;
    --gray-950: #0D0D0D;
    --gray-900: #1a1a1a;
    --green-400: #00ff41;
    --green-500: #00e639;
    --green-600: #00b32d;
    --green-700: #00802b;
    --red-500: #ff0000;
    --red-800: #990000;
    --red-900: #cc0000;
    --yellow-400: #ffff00;
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--black);
    --bg-secondary: var(--gray-950);
    --bg-tertiary: var(--gray-900);
    --text-primary: var(--green-400);
    --text-secondary: var(--green-600);
    --border-color: var(--green-700);
    --accent-color: var(--green-400);
    --accent-color-hover: var(--green-500);
    --success-color: var(--green-400);
    --danger-color: var(--red-500);
    --warning-color: var(--yellow-400);
    --btn-default-bg: var(--green-700);
    --btn-default-hover-bg: var(--green-600);
    --btn-default-text: var(--black);
    --btn-danger-bg: var(--red-800);
    --btn-danger-hover-bg: var(--red-900);
    --btn-danger-text: var(--black);
    --btn-accent-bg: var(--green-400);
    --btn-accent-hover-bg: var(--green-500);
    --btn-accent-text: var(--black);
    --btn-success-bg: var(--green-400);
    --btn-success-hover-bg: var(--green-500);
    --btn-success-text: var(--black);
    --toggle-bg-off: var(--green-700);
    --toggle-bg-on: var(--green-400);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Dracula Theme
   ================================================================= */
.theme-dracula {
    /* --- Palette --- */
    --dark-purple-800: #282a36;
    --dark-purple-700: #383a59;
    --dark-purple-600: #44475a;
    --dark-purple-400: #6272a4;
    --light-gray: #f8f8f2;
    --purple: #bd93f9;
    --pink: #ff79c6;
    --pink-hover: #ff92d0;
    --green: #50fa7b;
    --green-hover: #62faa4;
    --red: #ff5555;
    --red-hover: #ff6e6e;
    --yellow: #f1fa8c;
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--dark-purple-800);
    --bg-secondary: var(--dark-purple-700);
    --bg-tertiary: var(--dark-purple-600);
    --text-primary: var(--light-gray);
    --text-secondary: var(--purple);
    --border-color: var(--dark-purple-400);
    --accent-color: var(--pink);
    --accent-color-hover: var(--pink-hover);
    --success-color: var(--green);
    --danger-color: var(--red);
    --warning-color: var(--yellow);
    --btn-default-bg: var(--dark-purple-600);
    --btn-default-hover-bg: var(--dark-purple-400);
    --btn-default-text: var(--light-gray);
    --btn-danger-bg: var(--red);
    --btn-danger-hover-bg: var(--red-hover);
    --btn-danger-text: var(--dark-purple-800);
    --btn-accent-bg: var(--pink);
    --btn-accent-hover-bg: var(--pink-hover);
    --btn-accent-text: var(--dark-purple-800);
    --btn-success-bg: var(--green);
    --btn-success-hover-bg: var(--green-hover);
    --btn-success-text: var(--dark-purple-800);
    --toggle-bg-off: var(--dark-purple-600);
    --toggle-bg-on: var(--purple);
    --toggle-circle-bg: var(--text-primary);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Solarized Light Theme
   ================================================================= */
.theme-solarized-light {
    /* --- Palette --- */
    --base3: #fdf6e3;
    --base2: #eee8d5;
    --base1: #e7e1cf;
    --base00: #657b83;
    --base01: #586e75;
    --base02: #93a1a1;
    --base03: #839496;
    --base04: #002b36; /* Added for high contrast text */
    --blue: #268bd2;
    --blue-dark: #1e6a9e;
    --green: #859900;
    --green-dark: #728300;
    --red: #dc322f;
    --orange: #cb4b16;
    --yellow: #b58900;
    --white-overlay: rgba(255, 255, 255, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--base3);
    --bg-secondary: var(--base2);
    --bg-tertiary: var(--base1);
    --text-primary: var(--base00);
    --text-secondary: var(--base01);
    --border-color: var(--base02);
    --accent-color: var(--blue);
    --accent-color-hover: var(--blue-dark);
    --success-color: var(--green);
    --danger-color: var(--red);
    --warning-color: var(--yellow);
    --btn-default-bg: var(--base02);
    --btn-default-hover-bg: var(--base03);
    --btn-default-text: var(--base3);
    --btn-danger-bg: var(--red);
    --btn-danger-hover-bg: var(--orange);
    --btn-danger-text: var(--base3);
    --btn-accent-bg: var(--blue);
    --btn-accent-hover-bg: var(--blue-dark);
    --btn-accent-text: var(--base3);
    --btn-success-bg: var(--green);
    --btn-success-hover-bg: var(--green-dark);
    --btn-success-text: var(--base3);
    --toggle-bg-off: var(--base02);
    --toggle-bg-on: var(--blue);
    --toggle-circle-bg: var(--base3);
    --overlay-color: var(--white-overlay);
}

/* =================================================================
   Nord Theme
   ================================================================= */
.theme-nord {
    /* --- Palette --- */
    --polar-night-1: #2e3440;
    --polar-night-2: #3b4252;
    --polar-night-3: #434c5e;
    --polar-night-4: #4c566a;
    --snow-storm-1: #d8dee9;
    --snow-storm-2: #e5e9f0;
    --frost-3: #88c0d0;
    --frost-4: #8fbcbb;
    --aurora-green: #a3be8c;
    --aurora-green-dark: #99b57e;
    --aurora-red: #bf616a;
    --aurora-orange: #d08770;
    --aurora-yellow: #ebcb8b;
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--polar-night-1);
    --bg-secondary: var(--polar-night-2);
    --bg-tertiary: var(--polar-night-3);
    --text-primary: var(--snow-storm-1);
    --text-secondary: var(--snow-storm-2);
    --border-color: var(--polar-night-4);
    --accent-color: var(--frost-3);
    --accent-color-hover: var(--frost-4);
    --success-color: var(--aurora-green);
    --danger-color: var(--aurora-red);
    --warning-color: var(--aurora-yellow);
    --btn-default-bg: var(--polar-night-3);
    --btn-default-hover-bg: var(--polar-night-4);
    --btn-default-text: var(--snow-storm-1);
    --btn-danger-bg: var(--aurora-red);
    --btn-danger-hover-bg: var(--aurora-orange);
    --btn-danger-text: var(--polar-night-1);
    --btn-accent-bg: var(--frost-3);
    --btn-accent-hover-bg: var(--frost-4);
    --btn-accent-text: var(--polar-night-1);
    --btn-success-bg: var(--aurora-green);
    --btn-success-hover-bg: var(--aurora-green-dark);
    --btn-success-text: var(--polar-night-1);
    --toggle-bg-off: var(--polar-night-3);
    --toggle-bg-on: var(--frost-3);
    --toggle-circle-bg: var(--snow-storm-1);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Gruvbox Dark Theme
   ================================================================= */
.theme-gruvbox-dark {
    /* --- Palette --- */
    --gruv-dark0-hard: #1d2021;
    --gruv-dark0: #282828;
    --gruv-dark1: #3c3836;
    --gruv-dark2: #504945;
    --gruv-dark4: #7c6f64;
    --gruv-gray: #928374;
    --gruv-light1: #ebdbb2;
    --gruv-red: #cc241d;
    --gruv-red-bright: #fb4934;
    --gruv-green: #98971a;
    --gruv-green-bright: #b8bb26;
    --gruv-yellow: #d79921;
    --gruv-yellow-bright: #fabd2f;
    --gruv-blue: #458588;
    --gruv-aqua: #689d6a;
    --gruv-aqua-bright: #8ec07c;
    --gruv-orange: #d65d0e;
    --gruv-orange-bright: #fe8019;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--gruv-dark0);
    --bg-secondary: var(--gruv-dark0-hard);
    --bg-tertiary: var(--gruv-dark1);
    --text-primary: var(--gruv-light1);
    --text-secondary: var(--gruv-gray);
    --border-color: var(--gruv-dark2);
    --accent-color: var(--gruv-aqua-bright);
    --accent-color-hover: var(--gruv-aqua);
    --success-color: var(--gruv-green-bright);
    --danger-color: var(--gruv-red-bright);
    --warning-color: var(--gruv-yellow-bright);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--gruv-dark4);
    --btn-default-hover-bg: var(--gruv-dark2);
    --btn-default-text: var(--gruv-light1);
    --btn-danger-bg: var(--gruv-red);
    --btn-danger-hover-bg: var(--gruv-red-bright);
    --btn-danger-text: var(--gruv-light1);
    --btn-accent-bg: var(--gruv-aqua-bright);
    --btn-accent-hover-bg: var(--gruv-aqua);
    --btn-accent-text: var(--gruv-dark0-hard);
    --btn-success-bg: var(--gruv-green);
    --btn-success-hover-bg: var(--gruv-green-bright);
    --btn-success-text: var(--gruv-dark0-hard);
    --toggle-bg-off: var(--gruv-dark2);
    --toggle-bg-on: var(--gruv-aqua-bright);
    --toggle-circle-bg: var(--gruv-light1);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Monokai Theme
   ================================================================= */
.theme-monokai {
    /* --- Palette --- */
    --mono-bg: #272822;
    --mono-bg-dark: #1e1f1c;
    --mono-bg-light: #414339;
    --mono-fg: #f8f8f2;
    --mono-gray: #88846f;
    --mono-pink: #f92672;
    --mono-green: #a6e22e;
    --mono-blue: #66d9ef;
    --mono-yellow: #e6db74;
    --mono-orange: #fd971f;
    --mono-purple: #ae81ff;
    --mono-red: #f44747;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--mono-bg-dark);
    --bg-secondary: var(--mono-bg);
    --bg-tertiary: var(--mono-bg-light);
    --text-primary: var(--mono-fg);
    --text-secondary: var(--mono-gray);
    --border-color: var(--mono-bg-light);
    --accent-color: var(--mono-pink);
    --accent-color-hover: #ff508f; /* Lighter pink */
    --success-color: var(--mono-green);
    --danger-color: var(--mono-red);
    --warning-color: var(--mono-yellow);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--mono-bg-light);
    --btn-default-hover-bg: #575b61; /* Lighter gray */
    --btn-default-text: var(--mono-fg);
    --btn-danger-bg: var(--mono-red);
    --btn-danger-hover-bg: #f66a6a; /* Lighter red */
    --btn-danger-text: var(--mono-fg);
    --btn-accent-bg: var(--mono-pink);
    --btn-accent-hover-bg: #ff508f; /* Lighter pink */
    --btn-accent-text: var(--mono-fg);
    --btn-success-bg: var(--mono-green);
    --btn-success-hover-bg: #b9f24d; /* Lighter green */
    --btn-success-text: var(--mono-bg-dark);
    --toggle-bg-off: var(--mono-bg-light);
    --toggle-bg-on: var(--mono-pink);
    --toggle-circle-bg: var(--mono-fg);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Tokyo Night Theme
   ================================================================= */
.theme-tokyo-night {
    /* --- Palette --- */
    --tokyo-bg: #1a1b26;
    --tokyo-bg-light: #24283b;
    --tokyo-bg-dark: #16161e;
    --tokyo-fg: #c0caf5;
    --tokyo-fg-alt: #a9b1d6;
    --tokyo-comment: #565f89;
    --tokyo-blue: #7aa2f7;
    --tokyo-cyan: #7dcfff;
    --tokyo-green: #9ece6a;
    --tokyo-orange: #ff9e64;
    --tokyo-red: #f7768e;
    --tokyo-purple: #bb9af7;
    --tokyo-yellow: #e0af68;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--tokyo-bg);
    --bg-secondary: var(--tokyo-bg-light);
    --bg-tertiary: var(--tokyo-bg-dark);
    --text-primary: var(--tokyo-fg);
    --text-secondary: var(--tokyo-fg-alt);
    --border-color: var(--tokyo-comment);
    --accent-color: var(--tokyo-blue);
    --accent-color-hover: #9ab7ff; /* Lighter blue */
    --success-color: var(--tokyo-green);
    --danger-color: var(--tokyo-red);
    --warning-color: var(--tokyo-yellow);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--tokyo-comment);
    --btn-default-hover-bg: #6b739e; /* Lighter comment */
    --btn-default-text: var(--tokyo-fg);
    --btn-danger-bg: var(--tokyo-red);
    --btn-danger-hover-bg: #ff91a4; /* Lighter red */
    --btn-danger-text: var(--tokyo-bg);
    --btn-accent-bg: var(--tokyo-blue);
    --btn-accent-hover-bg: #9ab7ff; /* Lighter blue */
    --btn-accent-text: var(--tokyo-bg);
    --btn-success-bg: var(--tokyo-green);
    --btn-success-hover-bg: #b8f28a; /* Lighter green */
    --btn-success-text: var(--tokyo-bg);
    --toggle-bg-off: var(--tokyo-comment);
    --toggle-bg-on: var(--tokyo-blue);
    --toggle-circle-bg: var(--tokyo-fg);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Everforest Dark Theme
   ================================================================= */
.theme-everforest-dark {
    /* --- Palette --- */
    --ever-bg: #2d353b;
    --ever-bg-alt: #343f44;
    --ever-bg-dark: #232a2e;
    --ever-fg: #d3c6aa;
    --ever-gray: #859289;
    --ever-red: #e67e80;
    --ever-orange: #e69875;
    --ever-yellow: #dbbc7f;
    --ever-green: #a7c080;
    --ever-aqua: #83c092;
    --ever-blue: #7fbbb3;
    --ever-purple: #d699b6;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--ever-bg);
    --bg-secondary: var(--ever-bg-alt);
    --bg-tertiary: var(--ever-bg-dark);
    --text-primary: var(--ever-fg);
    --text-secondary: var(--ever-gray);
    --border-color: #475258; /* bg3 from palette */
    --accent-color: var(--ever-aqua);
    --accent-color-hover: #97d4a9; /* Lighter aqua */
    --success-color: var(--ever-green);
    --danger-color: var(--ever-red);
    --warning-color: var(--ever-yellow);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--ever-gray);
    --btn-default-hover-bg: #9da9a0; /* grey2 from palette */
    --btn-default-text: var(--ever-bg);
    --btn-danger-bg: var(--ever-red);
    --btn-danger-hover-bg: #f09496; /* Lighter red */
    --btn-danger-text: var(--ever-bg);
    --btn-accent-bg: var(--ever-aqua);
    --btn-accent-hover-bg: #97d4a9; /* Lighter aqua */
    --btn-accent-text: var(--ever-bg);
    --btn-success-bg: var(--ever-green);
    --btn-success-hover-bg: #bad496; /* Lighter green */
    --btn-success-text: var(--ever-bg);
    --toggle-bg-off: var(--ever-gray);
    --toggle-bg-on: var(--ever-aqua);
    --toggle-circle-bg: var(--ever-fg);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Solarized Dark Theme
   ================================================================= */
.theme-solarized-dark {
    /* --- Palette --- */
    --base03: #002b36;
    --base02: #073642;
    --base01: #586e75;
    --base00: #657b83;
    --base0: #839496;
    --base1: #93a1a1;
    --yellow: #b58900;
    --orange: #cb4b16;
    --red: #dc322f;
    --magenta: #d33682;
    --violet: #6c71c4;
    --blue: #268bd2;
    --cyan: #2aa198;
    --green: #859900;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--base03);
    --bg-secondary: var(--base02);
    --bg-tertiary: var(--base01);
    --text-primary: var(--base0);
    --text-secondary: var(--base1);
    --border-color: var(--base01);
    --accent-color: var(--blue);
    --accent-color-hover: #54a9e0; /* Lighter blue */
    --success-color: var(--green);
    --danger-color: var(--red);
    --warning-color: var(--yellow);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--base01);
    --btn-default-hover-bg: var(--base00);
    --btn-default-text: var(--base0);
    --btn-danger-bg: var(--red);
    --btn-danger-hover-bg: var(--orange);
    --btn-danger-text: var(--base03);
    --btn-accent-bg: var(--blue);
    --btn-accent-hover-bg: #54a9e0; /* Lighter blue */
    --btn-accent-text: var(--base03);
    --btn-success-bg: var(--green);
    --btn-success-hover-bg: #9cb400; /* Lighter green */
    --btn-success-text: var(--base03);
    --toggle-bg-off: var(--base01);
    --toggle-bg-on: var(--blue);
    --toggle-circle-bg: var(--base0);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   Catppuccin (Mocha) Theme
   ================================================================= */
.theme-catppuccin {
    /* --- Palette --- */
    --cat-base: #1e1e2e;
    --cat-mantle: #181825;
    --cat-crust: #11111b;
    --cat-surface0: #313244;
    --cat-surface1: #45475a;
    --cat-surface2: #585b70;
    --cat-text: #cdd6f4;
    --cat-subtext1: #bac2de;
    --cat-overlay2: #9399b2;
    --cat-red: #f38ba8;
    --cat-green: #a6e3a1;
    --cat-yellow: #f9e2af;
    --cat-blue: #89b4fa;
    --cat-pink: #f5c2e7;
    --cat-teal: #94e2d5;
    --cat-lavender: #b4befe;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--cat-base);
    --bg-secondary: var(--cat-mantle);
    --bg-tertiary: var(--cat-surface0);
    --text-primary: var(--cat-text);
    --text-secondary: var(--cat-subtext1);
    --border-color: var(--cat-surface1);
    --accent-color: var(--cat-lavender);
    --accent-color-hover: #c4c9fe; /* Lighter lavender */
    --success-color: var(--cat-green);
    --danger-color: var(--cat-red);
    --warning-color: var(--cat-yellow);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--cat-surface1);
    --btn-default-hover-bg: var(--cat-surface2);
    --btn-default-text: var(--cat-text);
    --btn-danger-bg: var(--cat-red);
    --btn-danger-hover-bg: #f5a0b8; /* Lighter red */
    --btn-danger-text: var(--cat-base);
    --btn-accent-bg: var(--cat-lavender);
    --btn-accent-hover-bg: #c4c9fe; /* Lighter lavender */
    --btn-accent-text: var(--cat-base);
    --btn-success-bg: var(--cat-green);
    --btn-success-hover-bg: #baf5b5; /* Lighter green */
    --btn-success-text: var(--cat-base);
    --toggle-bg-off: var(--cat-surface1);
    --toggle-bg-on: var(--cat-lavender);
    --toggle-circle-bg: var(--cat-text);
    --overlay-color: var(--black-overlay);
}

/* =================================================================
   One Dark Pro Theme
   ================================================================= */
.theme-one-dark-pro {
    /* --- Palette --- */
    --one-bg: #282c34;
    --one-fg: #abb2bf;
    --one-comment: #5c6370;
    --one-red: #e06c75;
    --one-green: #98c379;
    --one-yellow: #e5c07b;
    --one-orange: #d19a66;
    --one-blue: #61afef;
    --one-purple: #c678dd;
    --one-cyan: #56b6c2;
    --black-transparent: rgba(0, 0, 0, 0.3);
    --black-overlay: rgba(0, 0, 0, 0.7);

    /* --- Mapping --- */
    --bg-primary: var(--one-bg);
    --bg-secondary: #21252b; /* Slightly darker */
    --bg-tertiary: #3b4048; /* Slightly lighter */
    --text-primary: var(--one-fg);
    --text-secondary: var(--one-comment);
    --border-color: var(--one-comment);
    --accent-color: var(--one-blue);
    --accent-color-hover: #7ec1f7; /* Lighter blue */
    --success-color: var(--one-green);
    --danger-color: var(--one-red);
    --warning-color: var(--one-yellow);
    --shadow-tooltip: 0 30px 90px -20px var(--black-transparent);
    --btn-default-bg: var(--one-comment);
    --btn-default-hover-bg: #6e7886; /* Lighter comment */
    --btn-default-text: var(--one-fg);
    --btn-danger-bg: var(--one-red);
    --btn-danger-hover-bg: #e68b92; /* Lighter red */
    --btn-danger-text: var(--one-bg);
    --btn-accent-bg: var(--one-blue);
    --btn-accent-hover-bg: #7ec1f7; /* Lighter blue */
    --btn-accent-text: var(--one-bg);
    --btn-success-bg: var(--one-green);
    --btn-success-hover-bg: #b1d69a; /* Lighter green */
    --btn-success-text: var(--one-bg);
    --toggle-bg-off: var(--one-comment);
    --toggle-bg-on: var(--one-blue);
    --toggle-circle-bg: var(--one-fg);
    --overlay-color: var(--black-overlay);
}


/* =================================================================
   Base & Component Styles
   ================================================================= */
body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); transition: background 0.3s, color 0.3s; position: relative; }
.calculator-wrapper { background-color: var(--bg-secondary); }
.input-field { background-color: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-primary); }
.input-field:disabled { background-color: var(--bg-secondary); cursor: not-allowed; opacity: 0.7; }
.input-field.invalid { border-color: var(--danger-color); box-shadow: 0 0 0 2px color-mix(in srgb, var(--danger-color) 40%, transparent); }
.tp-percent.locked-input { background: var(--bg-primary); cursor: not-allowed; }
.section-header { background-color: var(--bg-tertiary); padding: 0.5rem 1rem; border-radius: 0.375rem; margin-bottom: 1rem; font-weight: 700; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); display: flex; justify-content: space-between; align-items: center; }
.result-group { background: var(--bg-primary); padding: 1rem; border-radius: 0.5rem; margin-top: 1.5rem; }
.result-item { display: flex; justify-content: space-between; align-items: baseline; flex-wrap: wrap; padding: 0.75rem 0; border-bottom: 1px solid var(--bg-tertiary); }
.result-item:last-child { border-bottom: none; }
.result-label { color: var(--text-secondary); display: flex; align-items: center; gap: 0.5rem; margin-right: 1rem; }
.input-label { @apply block text-xs font-medium text-[var(--text-secondary)] mb-1; }
.result-value { color: var(--text-primary); font-weight: 600; text-align: right; word-break: break-all; flex-grow: 1; }
.fade-in { animation: fadeIn 0.5s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
input[type=number] { -moz-appearance: textfield; }

.trade-type-switch button { padding: 0.5rem 1rem; border-radius: 0.375rem; transition: all 0.2s ease-in-out; border: 1px solid transparent; }
.trade-type-switch button.active { font-weight: 700; }
.trade-type-switch button.long.active { background-color: var(--success-color); border-color: var(--success-color); color: var(--btn-success-text); }
.trade-type-switch button.short.active { background-color: var(--danger-color); border-color: var(--danger-color); color: var(--btn-danger-text); }
.trade-type-switch button:not(.active) { background-color: var(--bg-tertiary); color: var(--text-primary); }
.trade-type-switch { background-color: var(--bg-tertiary); }

/* Styles for ATR Mode Switcher */
.atr-mode-switcher {
    display: flex;
    gap: 0.5rem; /* 8px */
}

.btn-switcher {
    padding: 0;
    border: none;
    background-color: transparent;
    color: var(--text-secondary);
    cursor: pointer;
    transition: color 0.2s ease-in-out;
    font-size: 0.875rem; /* 14px */
    font-weight: 500; /* Medium weight for non-active */
}

.btn-switcher.active {
    color: var(--text-primary);
    font-weight: 700; /* Bold for active */
}

.atr-toggle-track { background-color: var(--toggle-bg-off); transition: background-color 0.3s; }
input[type="checkbox"]:checked + .atr-toggle-track { background-color: var(--toggle-bg-on); }
.atr-toggle-track::after { background-color: var(--toggle-circle-bg); border-color: var(--border-color); transition: transform 0.3s, background-color 0.3s, border-color 0.3s; }
input[type="checkbox"]:checked + .atr-toggle-track::after { transform: translateX(calc(100% + 2px)); border-color: var(--toggle-circle-bg); }

.copy-btn, .price-fetch-btn { background: none; border: none; color: var(--text-secondary); cursor: pointer; transition: color 0.2s; padding-right: 0.25rem; }
.copy-btn:hover, .price-fetch-btn:hover { color: var(--success-color); }

/* New class for accent-colored icon buttons */
.btn-icon-accent {
    color: var(--accent-color);
    transition: color 0.2s;
}
.btn-icon-accent:hover {
    color: var(--accent-color-hover);
}

/* New class for lock icons */
.btn-lock-icon {
    color: var(--text-secondary);
    transition: color 0.2s;
}
.btn-lock-icon:hover {
    color: var(--accent-color);
}

/* New class for modal OK button */
.btn-modal-ok {
    background-color: var(--btn-accent-bg);
    color: var(--btn-accent-text);
    transition: background-color 0.2s;
}
.btn-modal-ok:hover {
    background-color: var(--btn-accent-hover-bg);
}

/* Custom classes for theme-aware buttons */
.btn-primary-action {
    background-color: var(--btn-accent-bg);
    color: var(--btn-accent-text);
    transition: background-color 0.2s;
}
.btn-primary-action:hover {
    background-color: var(--btn-accent-hover-bg);
}

.btn-secondary-action {
    background-color: var(--btn-default-bg);
    color: var(--btn-default-text);
    transition: background-color 0.2s;
}
.btn-secondary-action:hover {
    background-color: var(--btn-default-hover-bg);
}

.btn-primary-action:disabled,
.btn-secondary-action:disabled {
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
    cursor: not-allowed;
}

.copy-feedback, .save-feedback { color: var(--success-color); font-size: 0.8rem; visibility: hidden; opacity: 0; transition: all 0.3s; }
.copy-feedback.visible, .save-feedback.visible {
    visibility: visible;
    opacity: 1;
}
.visual-bar-container { background: var(--bg-primary); padding: 2.5rem 1rem 2.5rem 1rem; border-radius: 0.5rem; margin-top: 1.5rem; position: relative; }
.visual-bar { height: 1.5rem; position: relative; display: flex; border-radius: 0.375rem; overflow: visible; background-color: var(--bg-tertiary); }
.loss-zone { background-color: var(--danger-color); position: absolute; height: 100%;}
.gain-zone { background-color: var(--success-color); position: absolute; height: 100%;}
.bar-marker { position: absolute; top: -0.25rem; bottom: -0.25rem; width: 20px; display: flex; flex-direction: column; align-items: center; cursor: pointer; transform: translateX(-50%); }
.bar-marker::before { content: ''; position: absolute; left: 50%; transform: translateX(-50%); width: 4px; height: 100%; background-color: var(--text-primary); }
.bar-marker span { position: absolute; font-size: 0.75rem; background-color: var(--bg-tertiary); padding: 0.1rem 0.3rem; border-radius: 0.25rem; white-space: nowrap; }
.bar-marker:not(.entry-marker) span { bottom: 100%; margin-bottom: 0.25rem; box-shadow: var(--shadow-tooltip); }
.entry-marker span { top: 100%; margin-top: 0.25rem; }
.bar-marker:hover .tp-tooltip {
    visibility: visible;
    opacity: 1;
    transform: translateX(-50%) translateY(-5px);
}
.tp-tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(0);
    
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s, visibility 0.2s, transform 0.2s;
    
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
    padding: 0.5rem 0.75rem;
    border-radius: 0.5rem;
    font-size: 0.8rem;
    white-space: nowrap;
    z-index: 60;
    pointer-events: none;
    box-shadow: var(--shadow-tooltip);
}
.tp-tooltip::before {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid var(--bg-tertiary);
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--overlay-color);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 50;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
}
.modal-overlay.visible {
    visibility: visible;
    opacity: 1;
}
.modal-content {
    background-color: var(--bg-secondary);
    padding: 2rem;
    border-radius: 1rem;
    max-width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
    transform: scale(0.95);
    opacity: 0;
    transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out;
}
.modal-overlay.visible .modal-content {
    transform: scale(1);
    opacity: 1;
}
.journal-table { width: 100%; border-collapse: collapse; }
.journal-table th, .journal-table td { padding: 0.75rem; border: 1px solid var(--border-color); text-align: left; font-size: 0.875rem; }
.journal-table th { background-color: var(--bg-tertiary); }
.notes-cell { max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; transition: all 0.2s ease-in-out; }
.notes-cell.expanded { white-space: pre-wrap; overflow: visible; text-overflow: clip; max-width: 400px; }
.journal-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 0.5rem; margin-bottom: 1.5rem; }
.stat-card { background: var(--bg-primary); padding: 0.75rem; border-radius: 0.5rem; text-align: center; }
.stat-value { font-size: 1.25rem; font-weight: 700; }
.stat-label { font-size: 0.75rem; color: var(--text-secondary); }
.suggestion-item { background-color: var(--bg-secondary); padding: 0.5rem 1rem; cursor: pointer; color: var(--text-primary); }
.suggestion-item:hover { background-color: var(--accent-color); color: var(--btn-accent-text); }

.prose h3 { margin-top: 1.5em; margin-bottom: 0.5em; font-size: 1.25rem; font-weight: 600; border-bottom: 1px solid var(--border-color); padding-bottom: 0.3em;}
.prose p { margin-bottom: 1em; line-height: 1.6; }
.prose ul { list-style-type: disc; margin-left: 1.5em; margin-bottom: 1em; }
.prose li { margin-bottom: 0.5em; }
.prose strong { color: var(--text-primary); font-weight: 600; }
.prose code { background-color: var(--bg-tertiary); padding: 0.2em 0.4em; margin: 0; font-size: 85%; border-radius: 3px; }
.price-loaded-flash { animation: price-flash 0.7s ease-in-out; }
@keyframes price-flash {
    0% { background-color: var(--bg-tertiary); }
    30% { background-color: color-mix(in srgb, var(--accent-color) 50%, var(--bg-tertiary)); }
    100% { background-color: var(--bg-tertiary); }
}

.text-link {
  color: var(--accent-color);
  text-decoration: none;
}

.text-link:hover {
  text-decoration: underline;
}

/* =================================================================
   Accessibility & Specific Overrides
   ================================================================= */
/*
  The following overrides ensure proper text contrast on buttons
  where the default text color (--btn-success-text, --btn-danger-text)
  does not provide enough contrast against the button's background color
  in a specific theme.
*/

/* Solarized Light: Use dark text on light green 'Long' button */
.theme-solarized-light .trade-type-switch button.long.active {
    color: var(--base04);
}

/* =================================================================
   Scrollbar & Modal Styles
   ================================================================= */
/* Themed Scrollbar Styles */
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    background: var(--bg-secondary);
}

::-webkit-scrollbar-thumb {
    background-color: var(--bg-tertiary);
    border-radius: 6px;
    border: 3px solid var(--bg-secondary);
}

::-webkit-scrollbar-thumb:hover {
    background-color: var(--accent-color);
}

/* Modal Size Utilities */
.modal-size-sm {
    @apply w-[90vw] max-w-lg;
}
.modal-size-journal {
    width: 80vw;
}
.modal-size-instructions {
    @apply w-[90vw] max-w-6xl;
    aspect-ratio: 3 / 2;
}

@media (max-width: 768px) {
    .modal-size-instructions {
        aspect-ratio: auto;
    }
}